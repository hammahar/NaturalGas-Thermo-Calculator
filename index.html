<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Gas Cooler & Refrigerant Calculator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1>Natural Gas Process Calculator</h1>
        <p>An engineering tool to calculate heat duty and refrigerant requirements based on real fluid thermodynamics.</p>
    </header>

    <main>
        <div class="container">
            <section class="card">
                <h2>1. Natural Gas Stream Conditions</h2>
                <p class="instruction">Enter the properties of the natural gas stream to be cooled.</p>
                
                <div class="input-grid">
                    <div class="input-group">
                        <label for="ng-mass-flow">Mass Flow Rate (lbm/hr)</label>
                        <input type="number" id="ng-mass-flow" placeholder="e.g., 100000">
                    </div>
                    <div class="input-group">
                        <label for="ng-temp-in">Inlet Temperature (°F)</label>
                        <input type="number" id="ng-temp-in" placeholder="e.g., 260">
                    </div>
                    <div class="input-group">
                        <label for="ng-temp-out">Outlet Temperature (°F)</label>
                        <input type="number" id="ng-temp-out" placeholder="e.g., 100">
                    </div>
                    <div class="input-group">
                        <label for="ng-pressure">Pressure (psia)</label>
                        <input type="number" id="ng-pressure" placeholder="e.g., 1015">
                    </div>
                </div>

                <h3>Composition (Mole Fraction)</h3>
                <table id="composition-table">
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Mole Fraction (yi)</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
                 <button id="calculate-duty-button" class="button-primary">Calculate Heat Duty</button>
            </section>
            
            <section class="card results-card">
                <h2>Natural Gas Analysis Results</h2>
                <div class="results-grid">
                    <div>
                        <p>Inlet Vapor Fraction</p>
                        <strong id="ng-vf-inlet">---</strong>
                    </div>
                     <div>
                        <p>Outlet Vapor Fraction</p>
                        <strong id="ng-vf-outlet">---</strong>
                    </div>
                    <div>
                        <p>Heat Duty (Q)</p>
                        <strong id="heat-duty">---</strong> <span class="unit">Btu/hr</span>
                    </div>
                </div>
            </section>

            <section class="card">
                <h2>2. Propane Refrigerant System</h2>
                <p class="instruction">Enter the conditions of the propane refrigerant. The system will calculate the required mass flow to absorb the heat duty.</p>
                <div class="input-grid">
                     <div class="input-group">
                        <label for="ref-temp-in">Inlet Temperature (°F)</label>
                        <input type="number" id="ref-temp-in" placeholder="e.g., 90">
                    </div>
                    <div class="input-group">
                        <label for="ref-pressure-in">Inlet Pressure (psia)</label>
                        <input type="number" id="ref-pressure-in" placeholder="e.g., 170">
                    </div>
                    <div class="input-group">
                        <label for="ref-temp-out">Outlet Temperature (°F)</label>
                        <input type="number" id="ref-temp-out" placeholder="e.g., 95">
                    </div>
                    <div class="input-group">
                         <label for="ref-composition">Propane Composition (yi)</label>
                         <input type="number" id="ref-composition" value="1.0" disabled>
                    </div>
                </div>
                <button id="calculate-refrigerant-button" class="button-primary">Calculate Refrigerant Flow</button>
            </section>
            
            <section class="card results-card">
                 <h2>Refrigerant Analysis Results</h2>
                 <div class="results-grid">
                    <div>
                        <p>Inlet Vapor Fraction</p>
                        <strong id="ref-vf-inlet">---</strong>
                    </div>
                     <div>
                        <p>Outlet Vapor Fraction</p>
                        <strong id="ref-vf-outlet">---</strong>
                    </div>
                    <div>
                        <p>Required Mass Flow</p>
                        <strong id="refrigerant-flow">---</strong> <span class="unit">lbm/hr</span>
                    </div>
                </div>
            </section>

             <section class="card">
                <h2>Governing Equations & Methodology</h2>
                <div class="equation">
                    <p><strong>Heat Duty (Real Fluid):</strong></p>
                    <p>ΔH_real = ΔH_ideal + (H_outletᴿ - H_inletᴿ)</p>
                    <p class="description">Total enthalpy change is the sum of the ideal gas enthalpy change and the difference in residual enthalpies at the outlet and inlet conditions.</p>
                </div>
                <div class="equation">
                    <p><strong>Ideal Enthalpy Change (ΔH_ideal):</strong></p>
                    <p>ΔH_ideal = ∫ Cₚ(T) dT</p>
                     <p class="description">Calculated by integrating the ideal gas heat capacity polynomial with respect to temperature.</p>
                </div>
                 <div class="equation">
                    <p><strong>Residual Enthalpy (Hᴿ) & Peng-Robinson EoS:</strong></p>
                    <p>Hᴿ = RT(Z-1) + ...</p>
                    <p class="description">The residual enthalpy correction is calculated from the Peng-Robinson Equation of State, which relates Pressure (P), Temperature (T), and Molar Volume (Vₘ) for real fluids. The compressibility factor (Z) is found by solving the cubic form of the EoS.</p>
                </div>
                 <div class="equation">
                    <p><strong>Latent Heat of Vaporization (Watson Equation):</strong></p>
                    <p>ΔH_vap(T₂) = ΔH_vap(T₁) * [(T_c - T₂)/(T_c - T₁)]⁰.³⁸</p>
                     <p class="description">The Watson equation estimates the latent heat of vaporization at a target temperature based on a known value at a reference temperature.</p>
                </div>
                 <div class="equation">
                    <p><strong>Refrigerant Mass Flow:</strong></p>
                    <p>ṁ_ref = Q / Δh_ref</p>
                     <p class="description">The required mass flow of the refrigerant is the total heat duty (Q) divided by the specific enthalpy change of the refrigerant, which prioritizes the latent heat of vaporization.</p>
                </div>
            </section>
        </div>
    </main>
    
    <footer>
        <p>&copy; 2025 Process Engineering Tools. All rights reserved.</p>
    </footer>

    <script src="properties.js"></script>
    <script src="script.js"></script>
</body>

</html>
